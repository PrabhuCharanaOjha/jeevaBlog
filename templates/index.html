{% extends 'base.html' %} {% block title %}Home - Flask Blog{% endblock %} {% block content %}
<h1>Welcome to Flask Blog</h1>
<div class="container mt-5">
  <h1>All Posts</h1>
  <hr />
  <ul class="list-group">
    {% for post in posts %}
    <li class="list-group-item">
      <h2>{{ post.title }}</h2>
      <p>{{ post.content }}</p>
      <p>Author: {{ post.author }}</p>
      <p>Published on: {{ post.timestamp }}</p>
      {% if current_user.is_authenticated and current_user.username == post.author %}
      <div class="btn-group" role="group" aria-label="Post Actions">
        <a href="{{ url_for('update_post', id=post.id) }}" class="btn btn-primary">Edit</a>
        <form id="delete-form" action="{{ url_for('delete_post', id=post.id) }}" method="POST">
          <button type="submit" class="btn btn-danger">Delete</button>
        </form>
      </div>
      {% endif %}
    </li>
    {% endfor %}
  </ul>
</div>
<script>
  document.getElementById("delete-form").addEventListener("submit", function (event) {
    event.preventDefault();
    var confirmation = confirm("Are you sure you want to delete this post?");
    if (confirmation) {
      this.submit();
    }
  });
</script>
{% endblock %}
